<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1200 900" width="1200" height="900">
  <defs>
    <style>
      .aws-cloud { fill: none; stroke: #232F3E; stroke-width: 2; stroke-dasharray: 5,5; }
      .vpc { fill: none; stroke: #248814; stroke-width: 2; }
      .public-subnet { fill: #E9F3E6; stroke: #7AA116; stroke-width: 1.5; }
      .private-subnet-eks { fill: #E6F2F8; stroke: #147EBA; stroke-width: 1.5; }
      .private-subnet-data { fill: #F8E8E8; stroke: #DD3522; stroke-width: 1.5; }
      .service-box { fill: #fff; stroke: #232F3E; stroke-width: 1; rx: 8; }
      .label { font-family: 'Segoe UI', Arial, sans-serif; font-size: 12px; fill: #232F3E; }
      .label-large { font-family: 'Segoe UI', Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #232F3E; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-data { stroke: #3334B9; stroke-width: 2; fill: none; }
      .arrow-storage { stroke: #7AA116; stroke-width: 2; fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
    <!-- AWS Icons as symbols -->
    <symbol id="icon-alb" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#8C4FFF" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">ALB</text>
    </symbol>
    <symbol id="icon-eks" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#FF9900" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">EKS</text>
    </symbol>
    <symbol id="icon-aurora" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#3334B9" />
      <text x="32" y="32" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold">Aurora</text>
      <text x="32" y="44" text-anchor="middle" fill="#fff" font-size="8">PostgreSQL</text>
    </symbol>
    <symbol id="icon-redis" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#C925D1" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Redis</text>
    </symbol>
    <symbol id="icon-s3" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#7AA116" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">S3</text>
    </symbol>
    <symbol id="icon-efs" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#7AA116" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">EFS</text>
    </symbol>
    <symbol id="icon-cloudfront" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#8C4FFF" />
      <text x="32" y="32" text-anchor="middle" fill="#fff" font-size="9" font-weight="bold">Cloud</text>
      <text x="32" y="44" text-anchor="middle" fill="#fff" font-size="9" font-weight="bold">Front</text>
    </symbol>
    <symbol id="icon-waf" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#DD344C" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">WAF</text>
    </symbol>
    <symbol id="icon-route53" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#8C4FFF" />
      <text x="32" y="32" text-anchor="middle" fill="#fff" font-size="9" font-weight="bold">Route</text>
      <text x="32" y="44" text-anchor="middle" fill="#fff" font-size="9" font-weight="bold">53</text>
    </symbol>
    <symbol id="icon-pod" viewBox="0 0 64 64">
      <rect x="4" y="4" width="56" height="56" rx="8" fill="#FF9900" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">Pod</text>
    </symbol>
    <symbol id="icon-gpu" viewBox="0 0 64 64">
      <rect x="4" y="4" width="56" height="56" rx="8" fill="#FF6B00" />
      <text x="32" y="32" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold">GPU</text>
      <text x="32" y="44" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold">Pod</text>
    </symbol>
    <symbol id="icon-nat" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#4D27AA" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">NAT</text>
    </symbol>
    <symbol id="icon-igw" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="28" fill="#4D27AA" />
      <text x="32" y="38" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">IGW</text>
    </symbol>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#f5f5f5"/>

  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" class="label-large" font-size="20">Pingvas Studio - AWS Architecture</text>

  <!-- AWS Cloud Border -->
  <rect x="30" y="50" width="1140" height="820" class="aws-cloud" rx="10"/>
  <text x="50" y="75" class="label-large">AWS Cloud</text>

  <!-- Region -->
  <rect x="50" y="90" width="1100" height="760" fill="none" stroke="#147EBA" stroke-width="1" stroke-dasharray="5,5" rx="8"/>
  <text x="70" y="115" class="label" fill="#147EBA">Region: ap-northeast-2 (Seoul)</text>

  <!-- VPC -->
  <rect x="70" y="130" width="1060" height="700" class="vpc" rx="8"/>
  <text x="90" y="155" class="label-large" fill="#248814">VPC: 10.0.0.0/16</text>

  <!-- Public Subnet -->
  <rect x="90" y="170" width="1020" height="130" class="public-subnet" rx="6"/>
  <text x="110" y="195" class="label" fill="#7AA116">Public Subnets (10.0.1-3.0/24)</text>

  <!-- Internet Gateway -->
  <use xlink:href="#icon-igw" x="110" y="210" width="50" height="50"/>
  <text x="135" y="275" text-anchor="middle" class="label">Internet GW</text>

  <!-- NAT Gateway -->
  <use xlink:href="#icon-nat" x="200" y="210" width="50" height="50"/>
  <text x="225" y="275" text-anchor="middle" class="label">NAT GW</text>

  <!-- ALB -->
  <use xlink:href="#icon-alb" x="400" y="210" width="50" height="50"/>
  <text x="425" y="275" text-anchor="middle" class="label">ALB</text>

  <!-- CloudFront -->
  <use xlink:href="#icon-cloudfront" x="600" y="210" width="50" height="50"/>
  <text x="625" y="275" text-anchor="middle" class="label">CloudFront</text>

  <!-- WAF -->
  <use xlink:href="#icon-waf" x="700" y="210" width="50" height="50"/>
  <text x="725" y="275" text-anchor="middle" class="label">WAF</text>

  <!-- Route 53 -->
  <use xlink:href="#icon-route53" x="800" y="210" width="50" height="50"/>
  <text x="825" y="275" text-anchor="middle" class="label">Route 53</text>

  <!-- Private Subnet EKS -->
  <rect x="90" y="320" width="1020" height="220" class="private-subnet-eks" rx="6"/>
  <text x="110" y="345" class="label" fill="#147EBA">Private Subnets - EKS (10.0.11-13.0/24)</text>

  <!-- EKS Cluster -->
  <use xlink:href="#icon-eks" x="110" y="370" width="60" height="60"/>
  <text x="140" y="450" text-anchor="middle" class="label">EKS Cluster</text>

  <!-- API Services -->
  <g>
    <rect x="220" y="365" width="160" height="100" fill="#fff" stroke="#FF9900" stroke-width="2" rx="8"/>
    <text x="300" y="390" text-anchor="middle" class="label-large" fill="#FF9900">API Services</text>
    <use xlink:href="#icon-pod" x="235" y="400" width="40" height="40"/>
    <use xlink:href="#icon-pod" x="280" y="400" width="40" height="40"/>
    <use xlink:href="#icon-pod" x="325" y="400" width="40" height="40"/>
    <text x="300" y="480" text-anchor="middle" class="label">User, Generation, Payment, Gallery</text>
  </g>

  <!-- AI Workers -->
  <g>
    <rect x="420" y="365" width="160" height="100" fill="#fff" stroke="#FF6B00" stroke-width="2" rx="8"/>
    <text x="500" y="390" text-anchor="middle" class="label-large" fill="#FF6B00">AI Workers</text>
    <use xlink:href="#icon-gpu" x="435" y="400" width="40" height="40"/>
    <use xlink:href="#icon-gpu" x="480" y="400" width="40" height="40"/>
    <use xlink:href="#icon-gpu" x="525" y="400" width="40" height="40"/>
    <text x="500" y="480" text-anchor="middle" class="label">GPU Pods (g5.xlarge)</text>
  </g>

  <!-- Karpenter -->
  <g>
    <rect x="620" y="370" width="100" height="80" fill="#fff" stroke="#FF9900" stroke-width="2" rx="8"/>
    <text x="670" y="395" text-anchor="middle" class="label" fill="#FF9900">Karpenter</text>
    <text x="670" y="415" text-anchor="middle" class="label">Auto</text>
    <text x="670" y="435" text-anchor="middle" class="label">Scaling</text>
  </g>

  <!-- ECR -->
  <g>
    <rect x="760" y="370" width="80" height="80" fill="#fff" stroke="#FF9900" stroke-width="2" rx="8"/>
    <text x="800" y="415" text-anchor="middle" class="label-large" fill="#FF9900">ECR</text>
  </g>

  <!-- CloudWatch -->
  <g>
    <rect x="880" y="370" width="100" height="80" fill="#fff" stroke="#E7157B" stroke-width="2" rx="8"/>
    <text x="930" y="405" text-anchor="middle" class="label" fill="#E7157B">CloudWatch</text>
    <text x="930" y="425" text-anchor="middle" class="label">Monitoring</text>
  </g>

  <!-- Private Subnet Data -->
  <rect x="90" y="560" width="1020" height="250" class="private-subnet-data" rx="6"/>
  <text x="110" y="585" class="label" fill="#DD3522">Private Subnets - Data (10.0.21-23.0/24)</text>

  <!-- Aurora PostgreSQL -->
  <g>
    <rect x="110" y="610" width="140" height="100" fill="#fff" stroke="#3334B9" stroke-width="2" rx="8"/>
    <use xlink:href="#icon-aurora" x="155" y="620" width="50" height="50"/>
    <text x="180" y="695" text-anchor="middle" class="label">Aurora PostgreSQL</text>
    <text x="180" y="710" text-anchor="middle" class="label" font-size="10">Serverless v2</text>
  </g>

  <!-- ElastiCache Redis -->
  <g>
    <rect x="280" y="610" width="140" height="100" fill="#fff" stroke="#C925D1" stroke-width="2" rx="8"/>
    <use xlink:href="#icon-redis" x="325" y="620" width="50" height="50"/>
    <text x="350" y="695" text-anchor="middle" class="label">ElastiCache</text>
    <text x="350" y="710" text-anchor="middle" class="label" font-size="10">Redis (Sentinel)</text>
  </g>

  <!-- EFS -->
  <g>
    <rect x="450" y="610" width="140" height="100" fill="#fff" stroke="#7AA116" stroke-width="2" rx="8"/>
    <use xlink:href="#icon-efs" x="495" y="620" width="50" height="50"/>
    <text x="520" y="695" text-anchor="middle" class="label">EFS</text>
    <text x="520" y="710" text-anchor="middle" class="label" font-size="10">Model Cache</text>
  </g>

  <!-- S3 -->
  <g>
    <rect x="620" y="610" width="140" height="100" fill="#fff" stroke="#7AA116" stroke-width="2" rx="8"/>
    <use xlink:href="#icon-s3" x="665" y="620" width="50" height="50"/>
    <text x="690" y="695" text-anchor="middle" class="label">S3</text>
    <text x="690" y="710" text-anchor="middle" class="label" font-size="10">Images Storage</text>
  </g>

  <!-- Secrets Manager -->
  <g>
    <rect x="790" y="610" width="140" height="100" fill="#fff" stroke="#DD344C" stroke-width="2" rx="8"/>
    <text x="860" y="660" text-anchor="middle" class="label-large" fill="#DD344C">Secrets</text>
    <text x="860" y="680" text-anchor="middle" class="label-large" fill="#DD344C">Manager</text>
  </g>

  <!-- Connections -->
  <!-- ALB to API Services -->
  <path d="M 425 260 L 425 295 L 300 295 L 300 365" class="arrow" stroke="#666"/>

  <!-- API Services to Aurora -->
  <path d="M 260 465 L 260 540 L 180 540 L 180 610" class="arrow-data" stroke-dasharray="5,3"/>

  <!-- API Services to Redis -->
  <path d="M 300 465 L 300 540 L 350 540 L 350 610" class="arrow-data" stroke-dasharray="5,3"/>

  <!-- AI Workers to EFS -->
  <path d="M 500 465 L 500 540 L 520 540 L 520 610" class="arrow-storage" stroke-dasharray="5,3"/>

  <!-- API Services to S3 -->
  <path d="M 340 465 L 340 540 L 690 540 L 690 610" class="arrow-storage" stroke-dasharray="5,3"/>

  <!-- CloudFront to S3 -->
  <path d="M 625 260 L 625 295 L 690 295 L 690 550" class="arrow-storage"/>

  <!-- Legend -->
  <g transform="translate(950, 620)">
    <rect x="0" y="0" width="150" height="130" fill="#fff" stroke="#ccc" rx="8"/>
    <text x="75" y="25" text-anchor="middle" class="label-large">Legend</text>
    <line x1="10" y1="45" x2="40" y2="45" stroke="#666" stroke-width="2"/>
    <text x="50" y="50" class="label" font-size="10">Traffic Flow</text>
    <line x1="10" y1="70" x2="40" y2="70" stroke="#3334B9" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="50" y="75" class="label" font-size="10">Data Layer</text>
    <line x1="10" y1="95" x2="40" y2="95" stroke="#7AA116" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="50" y="100" class="label" font-size="10">Storage</text>
    <rect x="10" y="110" width="20" height="10" fill="#E6F2F8"/>
    <text x="40" y="118" class="label" font-size="10">EKS Subnet</text>
  </g>

</svg>
